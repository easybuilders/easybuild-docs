
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.easybuild.io/extended-dry-run/">
      
      <link rel="icon" href="../favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Extended dry run {: #extended_dry_run } - EasyBuild - building software with ease</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-BLVCH6991S"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-BLVCH6991S",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-BLVCH6991S",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="easybuild" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#extended_dry_run" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="EasyBuild - building software with ease" class="md-header__button md-logo" aria-label="EasyBuild - building software with ease" data-md-component="logo">
      
  <img src="../img/easybuild_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EasyBuild - building software with ease
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Extended dry run {: #extended_dry_run }
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/easybuilders/easybuild-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    EasyBuild @ GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="EasyBuild - building software with ease" class="md-nav__button md-logo" aria-label="EasyBuild - building software with ease" data-md-component="logo">
      
  <img src="../img/easybuild_logo.png" alt="logo">

    </a>
    EasyBuild - building software with ease
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/easybuilders/easybuild-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    EasyBuild @ GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../what-is-easybuild/" class="md-nav__link">
        What is EasyBuild?
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../terminology/" class="md-nav__link">
        Terminology
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../using-easybuild/" class="md-nav__link">
        Using EasyBuild
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/" class="md-nav__link">
        Release notes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        API
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../getting-help/" class="md-nav__link">
        Getting help
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/easybuilders/easybuild-docs/easybuild-docs/edit/main/docs/extended-dry-run.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="extended_dry_run">Extended dry run<a class="headerlink" href="#extended_dry_run" title="Permanent link">&para;</a></h1>
<p>Using <code>--extended-dry-run</code> or <code>-x</code> (supported since EasyBuild v2.4.0,
see release notes for <a class="autorefs autorefs-internal" href="../release-notes/#release_notes_eb240">EasyBuild v2.4.0 (November 10th 2015)</a>), a detailed overview of the build and install procedure
that EasyBuild is going to execute can be obtained almost instantly.</p>
<p>All time-consuming operations, including executing commands to
configure/build/install the software, are only <em>reported</em> rather than
being actually performed.</p>
<p>Example output is available at
<a class="autorefs autorefs-internal" href="#extended_dry_run_examples">Extended dry run: examples</a>.</p>
<h2 id="extended_dry_run_notes">Important notes<a class="headerlink" href="#extended_dry_run_notes" title="Permanent link">&para;</a></h2>
<p>There are a couple of things you should be aware of when using
<code>--extended-dry-run</code> and interpreting the output it produces.</p>
<h3 id="extended_dry_run_notes_differences">Build/install procedure reported by dry run may be (slightly) different<a class="headerlink" href="#extended_dry_run_notes_differences" title="Permanent link">&para;</a></h3>
<p>The actual build and install procedure may (slightly) differ from the
one reported by <code>--extended-dry-run</code>, due to conditional checks in the
easyblock being used.</p>
<p>For example, expressions that are conditional on the presence of certain
files or directories in the build directory will always be false, since
the build directory is never actually populated.</p>
<h3 id="extended_dry_run_notes_ignored_errors">Errors are ignored (by default) during dry run<a class="headerlink" href="#extended_dry_run_notes_ignored_errors" title="Permanent link">&para;</a></h3>
<p>Any errors that occur are ignored, and are reported with a clear warning
message. This is done because it is possible that these errors occur
because of the dry run mechanism.</p>
<p>For example, the install step could assume that certain files created by
a previous step will be present, but they will not be there since the
commands that are supposed to produce them were not actually performed
in dry run mode.</p>
<p>Errors are ignored <em>on a per-step basis</em>. When an error is ignored in a
particular step, that step is aborted, which may result in partial dry
run output for that particular step. Subsequent steps will still be run
(in dry run mode), however.</p>
<p>Since it's possible that these errors occur due to a bug in the
easyblock being used, it's important to pay attention to these ignored
errors.</p>
<p>Ignored errors are reported as follows, for example:</p>
<div class="highlight"><pre><span></span><code><span class="go">== testing... [DRY RUN]</span>

<span class="go">[test_step method]</span>
<span class="go">!!!</span>
<span class="go">!!! WARNING: ignoring error &quot;[Errno 2] No such file or directory: &#39;test&#39;&quot;</span>
<span class="go">!!!</span>
</code></pre></div>
<p>At the end of dry run output, another warning message is shown if any
ignored errors occurred:</p>
<div class="highlight"><pre><span></span><code><span class="go">== COMPLETED: Installation ended successfully</span>

<span class="go">!!!</span>
<span class="go">!!! WARNING: One or more errors were ignored, see warnings above</span>
<span class="go">!!!</span>
</code></pre></div>
<h4 id="extended_dry_run_notes_ignored_errors_disabling">Disabling ignoring errors during dry run<a class="headerlink" href="#extended_dry_run_notes_ignored_errors_disabling" title="Permanent link">&para;</a></h4>
<p>Ignoring errors that occur during a dry run is enabled by default; it
can be disabled using the configuration option that is available for it,
i.e. by:</p>
<ul>
<li>the <code>--disable-extended-dry-run-ignore-errors</code> command line option</li>
<li>by defining the <code>$EASYBUILD_DISABLE_EXTENDED_DRY_RUN_IGNORE_ERRORS</code>
    environment variable</li>
<li>or by defining <code>disable-extended-dry-run-ignore-errors</code> in an
    EasyBuild configuration file</li>
</ul>
<p>(see also <a class="autorefs autorefs-internal" href="../configuration/#configuring_easybuild">Configuring EasyBuild</a>)</p>
<h2 id="extended_dry_run_overview">Overview of dry run mechanism<a class="headerlink" href="#extended_dry_run_overview" title="Permanent link">&para;</a></h2>
<p>During an extended dry run, several operations are not performed, or are
only simulated.</p>
<p>The sections below give a detailed overview of the dry run mechanism.</p>
<h3 id="extended_dry_run_overview_build_install_dirs">Temporary directories as build/install directories<a class="headerlink" href="#extended_dry_run_overview_build_install_dirs" title="Permanent link">&para;</a></h3>
<p>To make very sure that EasyBuild does not touch any files or directories
during the dry run, the build and (software/module) install directories
are replaced by subdirectories of the temporary directory used by that
particular EasyBuild session.</p>
<p>In the background, the values for <code>self.builddir</code>, <code>self.installdir</code> and
<code>self.installdir_mod</code> are changed in the <code>EasyBlock</code> instance(s) being
used; this also affects the use of the <code>%(builddir)s</code> and
<code>$(installdir)s</code> values in easyconfig files.</p>
<p>Although the build and install directories are effectively temporary
directories during a dry run (under a prefix like
<code>/tmp/eb-aD_yNu/__ROOT__</code>), this is not visible in the dry run output:
the 'fake' build and install directories are replaced by the
corresponding original value in the dry run output. For example:</p>
<div class="highlight"><pre><span></span><code><span class="go">[extract_step method]</span>
<span class="go">  running command &quot;tar xzf /home/example/easybuild/sources/b/bzip2/bzip2-1.0.6.tar.gz&quot;</span>
<span class="go">  (in /tmp/example/eb_build/bzip2/1.0.6/GCC-4.9.2)</span>
</code></pre></div>
<h4 id="extended_dry_run_overview_build_dir_guess">Note on build directory in dry run mode<a class="headerlink" href="#extended_dry_run_overview_build_dir_guess" title="Permanent link">&para;</a></h4>
<p>The build (sub)directory used during an actual (non-dry run) EasyBuild
session may be different than the one mentioned in the dry run output.</p>
<p>This is because during a dry run, EasyBuild will <em>guess</em> the name of the
subdirectory that is created by unpacking the first source file in the
build directory as being <code>&lt;name&gt;-&lt;version&gt;</code>. Although this is a common
pattern, it is not always 100% correct.</p>
<p>For example, you may see this in the dry run output for WRF (for which a
build-in-installdir procedure is used):</p>
<div class="highlight"><pre><span></span><code><span class="go">[build_step method]</span>
<span class="go">  running command &quot;tcsh ./compile -j 4 wrf&quot;</span>
<span class="go">  (in /home/example/eb/software/WRF/3.6.1-intel-2015a-dmpar/WRF-3.6.1)</span>
</code></pre></div>
<p>The actual build (and install) subdirectory is slightly different while
not in dry run mode however, i.e.:
<code>/home/example/eb/software/WRF/3.6.1-intel-2015a-dmpar/WRFV3</code>.</p>
<h3 id="extended_dry_run_overview_downloading">No downloading of missing source files/patches<a class="headerlink" href="#extended_dry_run_overview_downloading" title="Permanent link">&para;</a></h3>
<p>Required files (source files/patches) are not downloaded during a dry
run if they are not available yet.</p>
<p>The dry run output will specify whether files are found (and if so, at
which path) or not; the exact output for files that were not found
depends on whether or not source URLs are available.</p>
<p>For example: if the required source file for <code>bzip2</code> is not available
yet, it is indicated where EasyBuild will try to download it to:</p>
<div class="highlight"><pre><span></span><code><span class="go">[fetch_step method]</span>
<span class="go">Available download URLs for sources/patches:</span>
<span class="go">  * http://www.bzip.org/1.0.6/$source</span>

<span class="go">List of sources:</span>
<span class="go">  * bzip2-1.0.6.tar.gz downloaded to /home/example/easybuild/sources/b/bzip2/bzip2-1.0.6.tar.gz</span>

<span class="go">List of patches:</span>
<span class="gp gp-VirtualEnv">(none)</span>
</code></pre></div>
<p>If the source file is already available in the source path that
EasyBuild was configured with, it is indicated as such:</p>
<div class="highlight"><pre><span></span><code><span class="go">List of sources:</span>
<span class="go">  * bzip2-1.0.6.tar.gz found at /home/example/easybuild/sources/b/bzip2/bzip2-1.0.6.tar.gz</span>
</code></pre></div>
<p>In case no source URLs are available and required files are missing,
they are simply marked as such:</p>
<div class="highlight"><pre><span></span><code><span class="go">Available download URLs for sources/patches:</span>
<span class="gp gp-VirtualEnv">(none)</span>

<span class="go">List of sources:</span>
<span class="go">  * bzip2-1.0.6.tar.bz2 (MISSING)</span>
</code></pre></div>
<p>However, since the dry run mechanism never actually uses the source
files/patches, this does not affect the remainder of the output of
<code>--extended-dry-run</code>/<code>-x</code>.</p>
<h3 id="extended_dry_run_overview_checksum_verification">Checksum verification is skipped<a class="headerlink" href="#extended_dry_run_overview_checksum_verification" title="Permanent link">&para;</a></h3>
<p>Computing checksums of sources files/patches, and verifying them against
specified checksums (if available) is <em>skipped</em> during a dry run,
because it is considered potentially too time-consuming. In addition,
source files/patches may not be available anyway.</p>
<p>If checksums are available they are only reported, for example (for GCC
v4.9.3):</p>
<div class="highlight"><pre><span></span><code><span class="go">[checksum_step method]</span>
<span class="go">* expected checksum for gcc-4.9.3.tar.bz2: 6f831b4d251872736e8e9cc09746f327</span>
<span class="go">* expected checksum for gmp-6.0.0a.tar.bz2: b7ff2d88cae7f8085bd5006096eed470</span>
<span class="go">* expected checksum for mpfr-3.1.2.tar.gz: 181aa7bb0e452c409f2788a4a7f38476</span>
<span class="go">* expected checksum for mpc-1.0.2.tar.gz: 68fadff3358fb3e7976c7a398a0af4c3</span>
<span class="go">* expected checksum for mpfr-3.1.2-allpatches-20141204.patch: 58aec98d15982f9744a043d2f1c5af82</span>
</code></pre></div>
<h3 id="extended_dry_run_overview_unpacking_sources">Source files are not unpacked<a class="headerlink" href="#extended_dry_run_overview_unpacking_sources" title="Permanent link">&para;</a></h3>
<p>Source files are <em>not</em> unpacked, since this may require too much time
(in case of large source files). Additionally, source files may not be
available anyway.</p>
<p>This has a number of implications:</p>
<ul>
<li>files or directories that may be expected to be there are not, which
    may lead to (ignored) errors if the used easyblock does not take
    this into account (see also
    <a class="autorefs autorefs-internal" href="#extended_dry_run_notes_ignored_errors">Errors are ignored (by default) during dry run</a>)</li>
<li>the build directory in which commands are executed may be incorrect
    in the dry run output (see also
    <a class="autorefs autorefs-internal" href="#extended_dry_run_overview_build_dir_guess">Note on build directory in dry run mode</a>)</li>
</ul>
<p>The extraction command is mentioned in the dry run output however, for
example:</p>
<div class="highlight"><pre><span></span><code><span class="go">[extract_step method]</span>
<span class="go">  running command &quot;tar xjf bzip2-1.0.6.tar.bz2&quot;</span>
<span class="go">  (in /tmp/example/eb_build/bzip2/1.0.6/GCC-4.9.2)</span>
</code></pre></div>
<h3 id="extended_dry_run_overview_patching">Patch files are not applied, no runtime patching<a class="headerlink" href="#extended_dry_run_overview_patching" title="Permanent link">&para;</a></h3>
<p>Since source files are not unpacked, patch files can not applied either.</p>
<p>The dry run output does provide an overview of patch files, together
with where they are found and how they are applied:</p>
<div class="highlight"><pre><span></span><code><span class="go">[patch_step method]</span>
<span class="go">* applying patch file WRF_parallel_build_fix.patch</span>
<span class="go">  running command &quot;patch -b -p&lt;derived&gt; -i /home/example/easybuild/sources/w/WRF/WRF_parallel_build_fix.patch&quot;</span>
<span class="go">  (in /home/example/easybuild/easybuild/software/WRF/3.6.1-intel-2015a-dmpar)</span>
<span class="go">* applying patch file WRF-3.6.1_known_problems.patch</span>
<span class="go">  running command &quot;patch -b -p&lt;derived&gt; -i /home/example/easybuild/sources/w/WRF/WRF-3.6.1_known_problems.patch&quot;</span>
<span class="go">  (in /home/example/easybuild/easybuild/software/WRF/3.6.1-intel-2015a-dmpar)</span>
</code></pre></div>
<p>Likewise, runtime patching performed by the easyblock itself can not
work either. If the <code>apply_regex_substitutions</code> function (available from
<code>easybuild.tools.filetools</code>) is used, a clear overview is included in
the dry run output (see also
<a class="autorefs autorefs-internal" href="#extended_dry_run_guidelines_easyblocks_framework_functions_runtime_patching">Runtime patching of files</a>).</p>
<p>For example, in the <code>configure</code> step of the WRF easyblock when using the
Intel compilers, this yields:</p>
<div class="highlight"><pre><span></span><code><span class="go">[configure_step method]</span>
<span class="go">...</span>
<span class="go">applying regex substitutions to file configure.wrf</span>
<span class="go">  * regex pattern &#39;^(DM_FC\s*=\s*).*$&#39;, replacement string &#39;\1 mpif90&#39;</span>
<span class="go">  * regex pattern &#39;^(DM_CC\s*=\s*).*$&#39;, replacement string &#39;\1 mpicc -DMPI2_SUPPORT&#39;</span>
</code></pre></div>
<p>If the <code>apply_regex_substitutions</code> function provided for runtime
patching is not used (and <code>fileinput</code> is used directly, for example),
runtime patching performed by the easyblock will most likely result in
an error, leading to the step in which it is being performed being
aborted (see <a class="autorefs autorefs-internal" href="#extended_dry_run_notes_ignored_errors">Errors are ignored (by default) during dry run</a>).</p>
<h3 id="extended_dry_run_overview_module_load">Module <code>load</code> statements are executed or simulated<a class="headerlink" href="#extended_dry_run_overview_module_load" title="Permanent link">&para;</a></h3>
<p><code>module load</code> statements are either effectively executed or simulated,
depending on whether the corresponding module files are available or
not.</p>
<h4 id="extended_dry_run_overview_module_load_available">Available modules are loaded<a class="headerlink" href="#extended_dry_run_overview_module_load_available" title="Permanent link">&para;</a></h4>
<p><code>module load</code> statements are fairly light-weight, so they are
effectively executed if the module being loaded is available.</p>
<p>The dry run output includes an overview of the modules being loaded. In
addition an overview of all loaded modules, including the ones that were
loaded indirectly, is shown.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="go">[prepare_step method]</span>
<span class="go">Defining build environment, based on toolchain (options) and specified dependencies...</span>

<span class="go">Loading toolchain module...</span>

<span class="go">module load GCC/4.9.2</span>

<span class="go">Loading modules for dependencies...</span>

<span class="go">module load M4/1.4.17-GCC-4.9.2</span>

<span class="go">Full list of loaded modules:</span>
<span class="go">  1) GCC/4.8.2</span>
<span class="go">  2) M4/1.4.17-GCC-4.9.2</span>
</code></pre></div>
<h4 id="extended_dry_run_overview_module_load_simulated">Loading of non-available modules is simulated<a class="headerlink" href="#extended_dry_run_overview_module_load_simulated" title="Permanent link">&para;</a></h4>
<p>If the module file required to execute a particular <code>module load</code>
statement is not available, the dry run mechanism will <em>simulate</em> the
loading of the module.</p>
<p>The <code>module load</code> statements that were simulated rather than actually
performed are clearly indicated using <code>[SIMULATED]</code> in the dry run
output, for example:</p>
<div class="highlight"><pre><span></span><code><span class="go">[prepare_step method]</span>
<span class="go">Defining build environment, based on toolchain (options) and specified dependencies...</span>

<span class="go">Loading toolchain module...</span>

<span class="go">module load intel/2015a</span>

<span class="go">Loading modules for dependencies...</span>

<span class="go">module load JasPer/1.900.1-intel-2015a</span>
<span class="go">module load netCDF/4.3.2-intel-2015a [SIMULATED]</span>
<span class="go">module load netCDF-Fortran/4.4.0-intel-2015a [SIMULATED]</span>
<span class="go">module load tcsh/6.18.01-intel-2015a</span>
</code></pre></div>
<p>Only modules that were effectively loaded will appear in the full list
of modules being printed; modules for which the load was simulated will
not be included.</p>
<h5 id="extended_dry_run_overview_module_load_simulated_deps">Simulated loading of non-available <em>dependency</em> modules<a class="headerlink" href="#extended_dry_run_overview_module_load_simulated_deps" title="Permanent link">&para;</a></h5>
<p>For dependencies, simulating a <code>module load</code> statement basically (only)
entails defining the <code>$EBROOT*</code> and <code>$EBVERSION*</code> environment variables
(the full variable names are determined by the software name), which are
picked up by resp. the <code>get_software_root</code> and <code>get_software_version</code>
functions often used in easyblocks.</p>
<p>The <code>$EBVERSION*</code> environment variable is defined with the actual
software version of the dependency.</p>
<p>For the <code>$EBROOT*</code> environment variable, the name of the environment
variable itself prefixed with a '<code>$</code>' is used as a dummy value, rather
than using an fake installation software prefix. For example, when
simulating the load statement for a <code>GCC</code> module, the environment
variable <code>$EBROOTGCC</code> is defined as the string value <code>'$EBROOTGCC'</code>
(literally).</p>
<p>This results in sensible output when this value is picked up via
<code>get_software_root</code> by the easyblock.</p>
<p>For example, for netCDF used as a dependency for WRF the following is
included in the module file contents included in the dry run output:</p>
<div class="highlight"><pre><span></span><code><span class="go">setenv  NETCDF      &quot;$EBROOTNETCDF&quot;</span>
<span class="go">setenv  NETCDFF     &quot;$EBROOTNETCDFMINFORTRAN&quot;</span>
</code></pre></div>
<h5 id="extended_dry_run_overview_module_load_simulated_toolchain">Simulated loading of non-available <em>toolchain</em> module<a class="headerlink" href="#extended_dry_run_overview_module_load_simulated_toolchain" title="Permanent link">&para;</a></h5>
<p>When the module that corresponds to the toolchain being used is not
available, the dry run mechanism will also simulate the <code>module load</code>
statements for the individual toolchain components, to ensure that
version checks on the toolchain components can work as expected.</p>
<p>For example, if the toolchain module <code>intel/2015a</code> is not available, the
loading of the <code>icc</code>, <code>ifort</code>, <code>impi</code> and <code>imkl</code> modules that would be
loaded by the <code>intel</code> module is also simulated:</p>
<div class="highlight"><pre><span></span><code><span class="go">[prepare_step method]</span>
<span class="go">Defining build environment, based on toolchain (options) and specified dependencies...</span>

<span class="go">Loading toolchain module...</span>

<span class="go">module load icc/2015.1.133-GCC-4.9.2 [SIMULATED]</span>
<span class="go">module load ifort/2015.1.133-GCC-4.9.2 [SIMULATED]</span>
<span class="go">module load impi/5.0.2.044-iccifort-2015.1.133-GCC-4.9.2 [SIMULATED]</span>
<span class="go">module load imkl/11.2.1.133-iimpi-7.2.3-GCC-4.9.2 [SIMULATED]</span>
<span class="go">module load intel/2015a [SIMULATED]</span>
</code></pre></div>
<h3 id="extended_dry_run_build_environment">Build environment is reported<a class="headerlink" href="#extended_dry_run_build_environment" title="Permanent link">&para;</a></h3>
<p>The build environment that is set up based on the toolchain (and
toolchain options) being used, and the dependencies being loaded is
reported as a part of the dry run output.</p>
<p>For example, when <code>GCC</code> is used as a toolchain something like this will
be included in the <code>prepare_step</code> part of the dry run output:</p>
<div class="highlight"><pre><span></span><code><span class="go">Defining build environment...</span>

<span class="go">  export CC=&quot;gcc&quot;</span>
<span class="go">  export CFLAGS=&quot;-O2&quot;</span>
<span class="go">  export CXX=&quot;g++&quot;</span>
<span class="go">  export CXXFLAGS=&quot;-O2&quot;</span>
<span class="go">  export F77=&quot;gfortran&quot;</span>
<span class="go">  export F90=&quot;gfortran&quot;</span>
<span class="go">  export F90FLAGS=&quot;-O2&quot;</span>
<span class="go">  export FFLAGS=&quot;-O2&quot;</span>
<span class="go">  export FLIBS=&quot;-lgfortran&quot;</span>
<span class="go">  export LDFLAGS=&quot;-L/home/example/eb/software/GCC/4.8.2/lib&quot;</span>
<span class="go">  export LIBS=&quot;-lm -lpthread&quot;</span>
<span class="go">  export OPTFLAGS=&quot;-O2&quot;</span>
<span class="go">  export PRECFLAGS=&quot;&quot;</span>
</code></pre></div>
<p>This is particularly useful as an overview of which environment
variables that are defined by the toolchain mechanism, and to assess the
effect of changing toolchain options.</p>
<p>The output is deliberately formatted such that is can be easily
copy-pasted, which can be useful to mimic the environment in which
EasyBuild will perform the build and install procedure.</p>
<h3 id="extended_dry_run_overview_run_cmd">Shell commands are not executed<a class="headerlink" href="#extended_dry_run_overview_run_cmd" title="Permanent link">&para;</a></h3>
<p>Any shell commands that are executed via the <code>run_cmd</code> and <code>run_cmd_qa</code>
functions that are provided by the EasyBuild framework via the
<code>easybuild.tools.run</code> are <em>not</em> executed, only reported (see also
<a class="autorefs autorefs-internal" href="#extended_dry_run_guidelines_easyblocks_framework_functions_run_cmd">Executing commands</a>).</p>
<p>This typically includes the commands that are defined in the easyblock
to be run as a part of the configure/build/install steps.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="go">configuring... [DRY RUN]</span>

<span class="go">[configure_step method]</span>
<span class="go">  running command &quot; ./configure --prefix=/home/example/eb/software/make/3.82-GCC-4.8.2 &quot;</span>
<span class="go">  (in /home/example/eb/build/make/3.82/GCC-4.8.2/make-3.82)</span>

<span class="go">building... [DRY RUN]</span>

<span class="go">[build_step method]</span>
<span class="go">  running command &quot; make -j 4 &quot;</span>
<span class="go">  (in /home/example/eb/build/make/3.82/GCC-4.8.2/make-3.82)</span>

<span class="go">...</span>

<span class="go">installing... [DRY RUN]</span>

<span class="go">[stage_install_step method]</span>

<span class="go">[make_installdir method]</span>

<span class="go">[install_step method]</span>
<span class="go">  running command &quot; make install &quot;</span>
<span class="go">  (in /home/example/eb/build/make/3.82/GCC-4.8.2/make-3.82)</span>
</code></pre></div>
<p>There are a couple of minor exceptions though. Some (light-weight)
commands are always run by the EasyBuild framework, even in dry run
mode, and an easyblock can specify that particular commands <em>must</em>
always be run (see also
<a class="autorefs autorefs-internal" href="#extended_dry_run_guidelines_easyblocks_framework_functions_run_cmd">Executing commands</a>).</p>
<h3 id="extended_dry_run_overview_sanity_check">Sanity check paths/commands are not checked<a class="headerlink" href="#extended_dry_run_overview_sanity_check" title="Permanent link">&para;</a></h3>
<p>Since nothing is actually being installed during a dry run, the sanity
check paths/commands can not be checked.</p>
<p>Instead, the dry run mechanism will produce a clear overview of which
paths are expected to be found in the installation directory, and which
commands are expected to work (if any).</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="go">sanity checking... [DRY RUN]</span>

<span class="go">[sanity_check_step method]</span>
<span class="go">Sanity check paths - file [&#39;files&#39;]</span>
<span class="go">  * WRFV3/main/ideal.exe</span>
<span class="go">  * WRFV3/main/libwrflib.a</span>
<span class="go">  * WRFV3/main/ndown.exe</span>
<span class="go">  * WRFV3/main/nup.exe</span>
<span class="go">  * WRFV3/main/real.exe</span>
<span class="go">  * WRFV3/main/tc.exe</span>
<span class="go">  * WRFV3/main/wrf.exe</span>
<span class="go">Sanity check paths - (non-empty) directory [&#39;dirs&#39;]</span>
<span class="go">  * WRFV3/main</span>
<span class="go">  * WRFV3/run</span>
<span class="go">Sanity check commands</span>
<span class="go">  (none)</span>
</code></pre></div>
<h3 id="extended_dry_run_overview_no_downloading">Module file is incomplete and only printed<a class="headerlink" href="#extended_dry_run_overview_no_downloading" title="Permanent link">&para;</a></h3>
<p>During a dry run, the contents of the module file that would be
installed is still generated, but only printed; it is not actually
written to file.</p>
<p>More importantly however, the module file being reported is bound to be
<strong>incomplete</strong>, since the module generator only includes certain
statements conditionally, for example only if the files/directories to
which they relate actually exist. This typically affects <code>prepend-path</code>
statements, e.g. for <code>$PATH</code>, <code>$LD_LIBRARY_PATH</code>, etc.</p>
<p>For example, the reported module file for make v3.82 built with
<code>GCC/4.8.2</code> may look something like:</p>
<div class="highlight"><pre><span></span><code><span class="go">creating module... [DRY RUN]</span>

<span class="go">[make_module_step method]</span>
<span class="go">Generating module file /home/example/eb/modules/all/make/3.82-GCC-4.8.2, with contents:</span>

<span class="gp">    #</span>%Module
<span class="go">    proc ModulesHelp { } {</span>
<span class="go">        puts stderr { make-3.82: GNU version of make utility - Homepage: http://www.gnu.org/software/make/make.html</span>
<span class="go">        }</span>
<span class="go">    }</span>

<span class="go">    module-whatis {Description: make-3.82: GNU version of make utility - Homepage: http://www.gnu.org/software/make/make.html}</span>

<span class="go">    set root /home/example/eb/software/make/3.82-GCC-4.8.2</span>

<span class="go">    conflict make</span>

<span class="go">    if { ![ is-loaded GCC/4.8.2 ] } {</span>
<span class="go">        module load GCC/4.8.2</span>
<span class="go">    }</span>

<span class="go">    setenv  EBROOTMAKE      &quot;$root&quot;</span>
<span class="go">    setenv  EBVERSIONMAKE       &quot;3.82&quot;</span>
<span class="go">    setenv  EBDEVELMAKE     &quot;$root/easybuild/make-3.82-GCC-4.8.2-easybuild-devel&quot;</span>

<span class="gp">    # </span>Built with EasyBuild version <span class="m">2</span>.4.0
</code></pre></div>
<p>Note that there is no <code>prepend-path PATH</code> statement for the <code>bin</code>
subdirectory, for example.</p>
<h2 id="extended_dry_run_guidelines_easyblocks">Guidelines for easyblocks<a class="headerlink" href="#extended_dry_run_guidelines_easyblocks" title="Permanent link">&para;</a></h2>
<p>To ensure useful output under <code>--extended-dry-run</code>, easyblocks should be
implemented keeping in mind that some operations are possible not
performed, to avoid generating errors in dry run mode.</p>
<p>Although errors are just ignored by the dry run mechanism on a per-step
basis, they may hide subsequent operations and useful information for
the remainder of the step (see also
<a class="autorefs autorefs-internal" href="#extended_dry_run_notes_ignored_errors">Errors are ignored (by default) during dry run</a>).</p>
<h3 id="extended_dry_run_guidelines_easyblocks_detect_dry_run">Detecting dry run mode and enhancing the dry run output<a class="headerlink" href="#extended_dry_run_guidelines_easyblocks_detect_dry_run" title="Permanent link">&para;</a></h3>
<p>To detect whether an easyblock is being used in dry run mode, it
suffices to check the <code>self.dry_run</code> class variable.</p>
<p>Additional messages can be included in the dry run output using the
<code>self.dry_run_msg</code> method.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">EasyBlock</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">configure_step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dry_run</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dry_run_msg</span><span class="p">(</span><span class="s2">&quot;Dry run mode detected, not reading template configuration files&quot;</span><span class="p">)</span>
            <span class="o">...</span>
</code></pre></div>
<h3 id="extended_dry_run_guidelines_files_dirs_checks">Check whether files/directories exist before accessing them<a class="headerlink" href="#extended_dry_run_guidelines_files_dirs_checks" title="Permanent link">&para;</a></h3>
<p>Rather than assuming that particular files or directories will be there,
easyblocks should take into that they may not be, for example because
EasyBuild is being run in dry run mode.</p>
<p>For example, instead of simply assuming that a directory named
'<code>test</code>' will be there, the existence should be checked first. If not,
an appropriate error should be produced, but only when the easyblock is
<em>not</em> being used in dry run mode.</p>
<p><strong>Bad</strong> example:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># *BAD* example: maybe the &#39;test&#39; directory is not there (e.g., because we&#39;re in dry run mode)!</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">testcases</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">EasyBuildError</span><span class="p">(</span><span class="s2">&quot;Unexpected error when determining list of test cases: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
</code></pre></div>
<p>Good example:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># make sure the &#39;test&#39; directory is there before trying to access it</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">testcases</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">EasyBuildError</span><span class="p">(</span><span class="s2">&quot;Unexpected error when determining list of test cases: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>

<span class="c1"># only raise an error if we&#39;re not in dry run mode</span>
<span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">dry_run</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">EasyBuildError</span><span class="p">(</span><span class="s2">&quot;Test directory not found, failed to determine list of test cases&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Easyblocks that do not take this into account are likely to result in
ignored errors during a dry run (see also
<a class="autorefs autorefs-internal" href="#extended_dry_run_notes_ignored_errors">Errors are ignored (by default) during dry run</a>).
For example, for the bad example shown above:</p>
<div class="highlight"><pre><span></span><code><span class="go">!!!</span>
<span class="go">!!! WARNING: ignoring error &quot;Unexpected error when determining list of test cases: [Errno 2] No such file or directory: &#39;test&#39;&quot;</span>
<span class="go">!!!</span>
</code></pre></div>
<h3 id="extended_dry_run_guidelines_easyblocks_framework_functions">Use functions provided by the EasyBuild framework<a class="headerlink" href="#extended_dry_run_guidelines_easyblocks_framework_functions" title="Permanent link">&para;</a></h3>
<p>The EasyBuild framework provides a bunch of functions that are "<em>dry
run-aware</em>", and which can significantly help in keeping easyblocks
free from conditional statements checking <code>self.dry_run</code>:</p>
<ul>
<li><a class="autorefs autorefs-internal" href="#extended_dry_run_guidelines_easyblocks_framework_functions_setvar">Defining environment variables</a></li>
<li><a class="autorefs autorefs-internal" href="#extended_dry_run_guidelines_easyblocks_framework_functions_write_file">Writing or appending to files</a></li>
<li><a class="autorefs autorefs-internal" href="#extended_dry_run_guidelines_easyblocks_framework_functions_runtime_patching">Runtime patching of files</a></li>
<li><a class="autorefs autorefs-internal" href="#extended_dry_run_guidelines_easyblocks_framework_functions_run_cmd">Executing commands</a></li>
</ul>
<h4 id="extended_dry_run_guidelines_easyblocks_framework_functions_setvar">Defining environment variables<a class="headerlink" href="#extended_dry_run_guidelines_easyblocks_framework_functions_setvar" title="Permanent link">&para;</a></h4>
<p><em>(<code>setvar</code>)</em></p>
<p>For defining environment variables, the <code>setvar</code> function available in
the <code>easybuild.tools.environment</code> module should be used.</p>
<p>For example, from the WRF easyblock:</p>
<div class="highlight"><pre><span></span><code><span class="n">jasper</span> <span class="o">=</span> <span class="n">get_software_root</span><span class="p">(</span><span class="s1">&#39;JasPer&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">jasper</span><span class="p">:</span>
    <span class="n">env</span><span class="o">.</span><span class="n">setvar</span><span class="p">(</span><span class="s1">&#39;JASPERINC&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">jasper</span><span class="p">,</span> <span class="s1">&#39;include&#39;</span><span class="p">))</span>
</code></pre></div>
<p>When triggered in dry run mode, this will result in a clear dry run
message like:</p>
<div class="highlight"><pre><span></span><code><span class="go">export JASPERINC=&quot;$EBROOTJASPER/include&quot;</span>
</code></pre></div>
<p>The actual output depends on whether or not the required module for
<code>JasPer</code> is available (see
<a class="autorefs autorefs-internal" href="#extended_dry_run_overview_module_load_simulated_deps">Simulated loading of non-available <em>dependency</em> modules</a>).</p>
<h5 id="silently-defining-environment-variables">Silently defining environment variables<a class="headerlink" href="#silently-defining-environment-variables" title="Permanent link">&para;</a></h5>
<p>The <code>setvar</code> function also supports defining environment variables
<em>silently</em>, i.e. without producing a corresponding dry run message, via
the named argument <code>verbose</code>.</p>
<p>This is used in a couple of places in the EasyBuild framework, to avoid
some environment variables being defined cluttering the dry run output
without added value. It can be used for similar reasons in easyblocks.</p>
<p>For example, the <code>PythonPackage</code> uses it in the <em>install</em> step, to
modify <code>$PYTHONPATH</code> as required by the <code>python setup.py install</code>
procedure (which is considered not relevant to include in the dry run
output, since it's a technicality):</p>
<div class="highlight"><pre><span></span><code><span class="n">env</span><span class="o">.</span><span class="n">setvar</span><span class="p">(</span><span class="s1">&#39;PYTHONPATH&#39;</span><span class="p">,</span> <span class="n">new_pythonpath</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>
<h4 id="extended_dry_run_guidelines_easyblocks_framework_functions_write_file">Writing or appending to files<a class="headerlink" href="#extended_dry_run_guidelines_easyblocks_framework_functions_write_file" title="Permanent link">&para;</a></h4>
<p><em>(<code>write_file</code>)</em></p>
<p>For writing and appending to files, the EasyBuild framework provides the
<code>write_file</code> function (available from the <code>easybuild.tools.filetools</code>
module).</p>
<p>Using it is straightforward, for example:</p>
<div class="highlight"><pre><span></span><code><span class="n">write_file</span><span class="p">(</span><span class="s1">&#39;example.txt&#39;</span><span class="p">,</span> <span class="s2">&quot;Contents for the example file&quot;</span><span class="p">)</span>
</code></pre></div>
<p>To append to an existing file, <code>write_file</code> support a named argument
<code>append</code>.</p>
<p>When used in dry run mode, <code>write_file</code> does not actually (attempt to)
write to the file; instead, it just produces an appropriate dry run
message and returns.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="go">file written: /tmp/eb-ksVC07/tmp.conf</span>
</code></pre></div>
<h4 id="extended_dry_run_guidelines_easyblocks_framework_functions_runtime_patching">Runtime patching of files<a class="headerlink" href="#extended_dry_run_guidelines_easyblocks_framework_functions_runtime_patching" title="Permanent link">&para;</a></h4>
<p><em>(<code>apply_regex_substitutions</code>)</em></p>
<p>To make runtime patching of files in easyblocks easier, and to do it
with taking the possibility of being in dry run module into account, the
EasyBuild framework provides the <code>apply_regex_substitutions</code> function
(available from the <code>easybuild.tools.filetools</code> module, since EasyBuild
v2.4.0).</p>
<p>This function takes two arguments: a path to the file that should be
patched, and a list of tuples specifying the regular expression pattern
to match on, and the string value that should be used as replacement
text.</p>
<p>For example (simple fictional example):</p>
<div class="highlight"><pre><span></span><code><span class="c1"># replace value for C++ compiler</span>
<span class="n">apply_regex_substitutions</span><span class="p">(</span><span class="s1">&#39;config.mk&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;^(CPLUSPLUS\s*=).*&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\1</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;CXX&#39;</span><span class="p">])])</span>
</code></pre></div>
<p>When used in dry run mode, it will produce a message like:</p>
<div class="highlight"><pre><span></span><code><span class="go">applying regex substitutions to file config.mk</span>
<span class="go">  * regex pattern &#39;^(CPLUSPLUS\s*=\s).*&#39;, replacement string &#39;\1 g++&#39;</span>
</code></pre></div>
<h4 id="extended_dry_run_guidelines_easyblocks_framework_functions_run_cmd">Executing commands<a class="headerlink" href="#extended_dry_run_guidelines_easyblocks_framework_functions_run_cmd" title="Permanent link">&para;</a></h4>
<p><em>(<code>run_cmd</code> and <code>run_cmd_qa</code>)</em></p>
<p>To execute shell commands, the <code>run_cmd</code> and <code>run_cmd_qa</code> functions are
provided by the EasyBuild framework in the <code>easybuild.tools.run</code> module,
with the latter providing support for running interactive commands.</p>
<p>In their simplest form, they simply take the command to execute as a
string. For example:</p>
<div class="highlight"><pre><span></span><code><span class="n">run_cmd</span><span class="p">(</span><span class="s2">&quot;tcsh ./compile -j </span><span class="si">%s</span><span class="s2"> wrf&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;parallel&#39;</span><span class="p">])</span>
</code></pre></div>
<p>In dry run mode, these functions just produce a dry run message, rather
than actually executing the specified command. For example:</p>
<div class="highlight"><pre><span></span><code><span class="go">running command &quot;tcsh ./compile -j 4 wrf&quot;</span>
<span class="gp gp-VirtualEnv">(in /home/example/eb/software/WRF/3.6.1-intel-2015a-dmpar/WRF-3.6.1)</span>
</code></pre></div>
<p>Take into account that the directory included in the message may not be
100% accurate, see
<a class="autorefs autorefs-internal" href="#extended_dry_run_overview_build_dir_guess">Note on build directory in dry run mode</a>.</p>
<h5 id="silently-executing-commands">Silently executing commands<a class="headerlink" href="#silently-executing-commands" title="Permanent link">&para;</a></h5>
<p>The <code>verbose</code> named argument supported by the <code>run_cmd</code> function allows
to execute a particular command silently, i.e. without producing a dry
run message.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># only run for debugging purposes</span>
<span class="n">run_cmd</span><span class="p">(</span><span class="s2">&quot;ulimit -v&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>
<h5 id="forced-execution-of-particular-commands">Forced execution of particular commands<a class="headerlink" href="#forced-execution-of-particular-commands" title="Permanent link">&para;</a></h5>
<p>Sometimes, it can be required that specific (light-weight) commands are
<em>always</em> executed, because they have side-effects that are assumed to
have taken place later in the easyblock.</p>
<p>For this, the <code>run_cmd</code> function support another named argument, i.e.
<code>force_in_dry_run</code>. When set to <code>True</code>, the specified command will
always be executed, even when in dry run mode.</p>
<p>This is mainly intended for use in the EasyBuild framework itself, where
commands that verify certain things must be executed, but it can also be
useful for easyblocks (if used correctly).</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="n">out</span><span class="p">,</span> <span class="n">exit_code</span> <span class="o">=</span> <span class="n">run_cmd</span><span class="p">(</span><span class="s2">&quot;type module&quot;</span><span class="p">,</span> <span class="n">simple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">force_in_dry_run</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<h2 id="extended_dry_run_examples">Extended dry run: examples<a class="headerlink" href="#extended_dry_run_examples" title="Permanent link">&para;</a></h2>
<p>Output examples for <code>eb --extended-dry-run</code>/<code>eb -x</code>:</p>
<ul>
<li><a class="autorefs autorefs-internal" href="#extended_dry_run_examples_make382_GCC482">make v3.82 with GCC/4.8.2</a></li>
<li><a class="autorefs autorefs-internal" href="#extended_dry_run_examples_WRF361_intel2015a">WRF v3.6.1 with intel/2015a</a></li>
</ul>
<h3 id="extended_dry_run_examples_make382_GCC482">make v3.82 with GCC/4.8.2<a class="headerlink" href="#extended_dry_run_examples_make382_GCC482" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>eb make-3.82-GCC-4.8.2.eb -x
<span class="go">== temporary log file in case of crash /tmp/eb-ksVC07/easybuild-MmAugb.log</span>

<span class="go">== processing EasyBuild easyconfig /home/example/eb/easybuild-easyconfigs/easybuild/easyconfigs/m/make/make-3.82-GCC-4.8.2.eb</span>

<span class="go">Important note: the actual build &amp; install procedure that will be performed may diverge</span>
<span class="gp gp-VirtualEnv">(slightly)</span> <span class="go">from what is outlined below, due to conditions in the easyblock which are</span>
<span class="go">incorrectly handled in a dry run.</span>
<span class="go">Any errors that may occur are ignored and reported as warnings, on a per-step basis.</span>
<span class="go">Please be aware of this, and only use the information below for quick debugging purposes.</span>

<span class="go">*** DRY RUN using &#39;ConfigureMake&#39; easyblock (easybuild.easyblocks.generic.configuremake @ /home/example/eb/easybuild-easyblocks/easybuild/easyblocks/generic/configuremake.pyc) ***</span>

<span class="go">== building and installing make/3.82-GCC-4.8.2...</span>
<span class="go">fetching files... [DRY RUN]</span>

<span class="go">[fetch_step method]</span>
<span class="go">Available download URLs for sources/patches:</span>
<span class="go">  * http://ftpmirror.gnu.org/make/$source</span>

<span class="go">List of sources:</span>
<span class="go">  * make-3.82.tar.bz2 will be downloaded to /home/example/eb/sources/m/make/make-3.82.tar.bz2</span>

<span class="go">List of patches:</span>
<span class="gp gp-VirtualEnv">(none)</span>

<span class="go">creating build dir, resetting environment... [DRY RUN]</span>

<span class="go">[check_readiness_step method]</span>

<span class="go">[make_builddir method]</span>

<span class="go">[reset_changes method]</span>

<span class="go">[handle_iterate_opts method]</span>

<span class="go">unpacking... [DRY RUN]</span>

<span class="go">[checksum_step method]</span>
<span class="go">* expected checksum for make-3.82.tar.bz2: (none)</span>

<span class="go">[extract_step method]</span>
<span class="go">  running command &quot;tar xjf /home/example/eb/sources/m/make/make-3.82.tar.bz2&quot;</span>
<span class="go">  (in /home/example/eb/build/make/3.82/GCC-4.8.2)</span>

<span class="go">patching... [DRY RUN]</span>

<span class="go">[patch_step method]</span>

<span class="go">preparing... [DRY RUN]</span>

<span class="go">[prepare_step method]</span>
<span class="go">Defining build environment, based on toolchain (options) and specified dependencies...</span>

<span class="go">Loading toolchain module...</span>

<span class="go">module load GCC/4.8.2</span>

<span class="go">Loading modules for dependencies...</span>


<span class="go">Full list of loaded modules:</span>
<span class="go">  1) GCC/4.8.2</span>

<span class="go">Defining build environment...</span>

<span class="go">  export CC=&quot;gcc&quot;</span>
<span class="go">  export CFLAGS=&quot;-O2&quot;</span>
<span class="go">  export CXX=&quot;g++&quot;</span>
<span class="go">  export CXXFLAGS=&quot;-O2&quot;</span>
<span class="go">  export F77=&quot;gfortran&quot;</span>
<span class="go">  export F90=&quot;gfortran&quot;</span>
<span class="go">  export F90FLAGS=&quot;-O2&quot;</span>
<span class="go">  export FFLAGS=&quot;-O2&quot;</span>
<span class="go">  export FLIBS=&quot;-lgfortran&quot;</span>
<span class="go">  export LDFLAGS=&quot;-L/home/example/eb/software/GCC/4.8.2/lib&quot;</span>
<span class="go">  export LIBS=&quot;-lm -lpthread&quot;</span>
<span class="go">  export OPTFLAGS=&quot;-O2&quot;</span>
<span class="go">  export PRECFLAGS=&quot;&quot;</span>

<span class="go">configuring... [DRY RUN]</span>

<span class="go">[configure_step method]</span>
<span class="go">  running command &quot; ./configure --prefix=/home/example/eb/software/make/3.82-GCC-4.8.2 &quot;</span>
<span class="go">  (in /home/example/eb/build/make/3.82/GCC-4.8.2/make-3.82)</span>

<span class="go">building... [DRY RUN]</span>

<span class="go">[build_step method]</span>
<span class="go">  running command &quot; make -j 4 &quot;</span>
<span class="go">  (in /home/example/eb/build/make/3.82/GCC-4.8.2/make-3.82)</span>

<span class="go">testing... [DRY RUN]</span>

<span class="go">[test_step method]</span>

<span class="go">installing... [DRY RUN]</span>

<span class="go">[stage_install_step method]</span>

<span class="go">[make_installdir method]</span>

<span class="go">[install_step method]</span>
<span class="go">  running command &quot; make install &quot;</span>
<span class="go">  (in /home/example/eb/build/make/3.82/GCC-4.8.2/make-3.82)</span>

<span class="go">taking care of extensions... [DRY RUN]</span>

<span class="go">[extensions_step method]</span>

<span class="go">postprocessing... [DRY RUN]</span>

<span class="go">[post_install_step method]</span>

<span class="go">sanity checking... [DRY RUN]</span>

<span class="go">[sanity_check_step method]</span>
<span class="go">Sanity check paths - file [&#39;files&#39;]</span>
<span class="go">  * bin/make</span>
<span class="go">Sanity check paths - (non-empty) directory [&#39;dirs&#39;]</span>
<span class="go">  (none)</span>
<span class="go">Sanity check commands</span>
<span class="go">  (none)</span>

<span class="go">cleaning up... [DRY RUN]</span>

<span class="go">[cleanup_step method]</span>

<span class="go">creating module... [DRY RUN]</span>

<span class="go">[make_module_step method]</span>
<span class="go">Generating module file /home/example/eb/modules/all/make/3.82-GCC-4.8.2, with contents:</span>

<span class="gp">    #</span>%Module
<span class="go">    proc ModulesHelp { } {</span>
<span class="go">        puts stderr { make-3.82: GNU version of make utility - Homepage: http://www.gnu.org/software/make/make.html</span>
<span class="go">        }</span>
<span class="go">    }</span>

<span class="go">    module-whatis {Description: make-3.82: GNU version of make utility - Homepage: http://www.gnu.org/software/make/make.html}</span>

<span class="go">    set root /home/example/eb/software/make/3.82-GCC-4.8.2</span>

<span class="go">    conflict make</span>

<span class="go">    if { ![ is-loaded GCC/4.8.2 ] } {</span>
<span class="go">        module load GCC/4.8.2</span>
<span class="go">    }</span>

<span class="go">    setenv  EBROOTMAKE      &quot;$root&quot;</span>
<span class="go">    setenv  EBVERSIONMAKE       &quot;3.82&quot;</span>
<span class="go">    setenv  EBDEVELMAKE     &quot;$root/easybuild/make-3.82-GCC-4.8.2-easybuild-devel&quot;</span>

<span class="gp">    # </span>Built with EasyBuild version <span class="m">2</span>.4.0


<span class="go">permissions... [DRY RUN]</span>

<span class="go">[permissions_step method]</span>

<span class="go">packaging... [DRY RUN]</span>

<span class="go">[package_step method]</span>

<span class="go">== COMPLETED: Installation ended successfully</span>

<span class="go">Important note: the actual build &amp; install procedure that will be performed may diverge</span>
<span class="gp gp-VirtualEnv">(slightly)</span> <span class="go">from what is outlined above, due to conditions in the easyblock which are</span>
<span class="go">incorrectly handled in a dry run.</span>
<span class="go">Any errors that may occur are ignored and reported as warnings, on a per-step basis.</span>
<span class="go">Please be aware of this, and only use the information above for quick debugging purposes.</span>

<span class="gp gp-VirtualEnv">(no ignored errors during dry run)</span>

<span class="go">== Build succeeded for 1 out of 1</span>
<span class="go">== Temporary log file(s) /tmp/eb-ksVC07/easybuild-MmAugb.log* have been removed.</span>
<span class="go">== Temporary directory /tmp/eb-ksVC07 has been removed.</span>
</code></pre></div>
<h3 id="extended_dry_run_examples_WRF361_intel2015a">WRF v3.6.1 with intel/2015a<a class="headerlink" href="#extended_dry_run_examples_WRF361_intel2015a" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>eb WRF-3.6.1-intel-2015a-dmpar.eb -x
<span class="go">== temporary log file in case of crash /tmp/eb-Dh1wOp/easybuild-0bu9u9.log</span>

<span class="go">== processing EasyBuild easyconfig /home/example/eb/easybuild-easyconfigs/easybuild/easyconfigs/w/WRF/WRF-3.6.1-intel-2015a-dmpar.eb</span>

<span class="go">Important note: the actual build &amp; install procedure that will be performed may diverge</span>
<span class="gp gp-VirtualEnv">(slightly)</span> <span class="go">from what is outlined below, due to conditions in the easyblock which are</span>
<span class="go">incorrectly handled in a dry run.</span>
<span class="go">Any errors that may occur are ignored and reported as warnings, on a per-step basis.</span>
<span class="go">Please be aware of this, and only use the information below for quick debugging purposes.</span>

<span class="go">*** DRY RUN using &#39;EB_WRF&#39; easyblock (easybuild.easyblocks.wrf @ /home/example/eb/easybuild-easyblocks/easybuild/easyblocks/w/wrf.py) ***</span>

<span class="go">== building and installing WRF/3.6.1-intel-2015a-dmpar...</span>
<span class="go">fetching files... [DRY RUN]</span>

<span class="go">[fetch_step method]</span>
<span class="go">Available download URLs for sources/patches:</span>
<span class="go">  * http://www2.mmm.ucar.edu/wrf/src//$source</span>
<span class="go">  * http://www.mmm.ucar.edu/wrf/src//$source</span>

<span class="go">List of sources:</span>
<span class="go">  * WRFV3.6.1.TAR.gz will be downloaded to /home/example/eb/sources/w/WRF/WRFV3.6.1.TAR.gz</span>

<span class="go">List of patches:</span>
<span class="go">  * WRF_parallel_build_fix.patch found at /home/example/eb/easybuild-easyconfigs/easybuild/easyconfigs/w/WRF/WRF_parallel_build_fix.patch</span>
<span class="go">  * WRF-3.6.1_netCDF-Fortran_separate_path.patch found at /home/example/eb/easybuild-easyconfigs/easybuild/easyconfigs/w/WRF/WRF-3.6.1_netCDF-Fortran_separate_path.patch</span>
<span class="go">  * WRF-3.6.1_known_problems.patch found at /home/example/eb/easybuild-easyconfigs/easybuild/easyconfigs/w/WRF/WRF-3.6.1_known_problems.patch</span>
<span class="go">  * WRF_tests_limit-runtimes.patch found at /home/example/eb/easybuild-easyconfigs/easybuild/easyconfigs/w/WRF/WRF_tests_limit-runtimes.patch</span>

<span class="go">creating build dir, resetting environment... [DRY RUN]</span>

<span class="go">[check_readiness_step method]</span>

<span class="go">[make_builddir method]</span>

<span class="go">[reset_changes method]</span>

<span class="go">[handle_iterate_opts method]</span>

<span class="go">unpacking... [DRY RUN]</span>

<span class="go">[checksum_step method]</span>
<span class="go">* expected checksum for WRFV3.6.1.TAR.gz: (none)</span>
<span class="go">* expected checksum for WRF_parallel_build_fix.patch: (none)</span>
<span class="go">* expected checksum for WRF-3.6.1_netCDF-Fortran_separate_path.patch: (none)</span>
<span class="go">* expected checksum for WRF-3.6.1_known_problems.patch: (none)</span>
<span class="go">* expected checksum for WRF_tests_limit-runtimes.patch: (none)</span>

<span class="go">[extract_step method]</span>
<span class="go">  running command &quot;tar xzf /home/example/eb/sources/w/WRF/WRFV3.6.1.TAR.gz&quot;</span>
<span class="go">  (in /home/example/eb/software/WRF/3.6.1-intel-2015a-dmpar)</span>

<span class="go">patching... [DRY RUN]</span>

<span class="go">[patch_step method]</span>
<span class="go">* applying patch file WRF_parallel_build_fix.patch</span>
<span class="go">  running command &quot;patch -b -p&lt;derived&gt; -i /home/example/eb/easybuild-easyconfigs/easybuild/easyconfigs/w/WRF/WRF_parallel_build_fix.patch&quot;</span>
<span class="go">  (in /home/example/eb/software/WRF/3.6.1-intel-2015a-dmpar)</span>
<span class="go">* applying patch file WRF-3.6.1_netCDF-Fortran_separate_path.patch</span>
<span class="go">  running command &quot;patch -b -p&lt;derived&gt; -i /home/example/eb/easybuild-easyconfigs/easybuild/easyconfigs/w/WRF/WRF-3.6.1_netCDF-Fortran_separate_path.patch&quot;</span>
<span class="go">  (in /home/example/eb/software/WRF/3.6.1-intel-2015a-dmpar)</span>
<span class="go">* applying patch file WRF-3.6.1_known_problems.patch</span>
<span class="go">  running command &quot;patch -b -p&lt;derived&gt; -i /home/example/eb/easybuild-easyconfigs/easybuild/easyconfigs/w/WRF/WRF-3.6.1_known_problems.patch&quot;</span>
<span class="go">  (in /home/example/eb/software/WRF/3.6.1-intel-2015a-dmpar)</span>
<span class="go">* applying patch file WRF_tests_limit-runtimes.patch</span>
<span class="go">  running command &quot;patch -b -p&lt;derived&gt; -i /home/example/eb/easybuild-easyconfigs/easybuild/easyconfigs/w/WRF/WRF_tests_limit-runtimes.patch&quot;</span>
<span class="go">  (in /home/example/eb/software/WRF/3.6.1-intel-2015a-dmpar)</span>

<span class="go">preparing... [DRY RUN]</span>

<span class="go">[prepare_step method]</span>
<span class="go">Defining build environment, based on toolchain (options) and specified dependencies...</span>

<span class="go">Loading toolchain module...</span>

<span class="go">module load icc/2015.1.133-GCC-4.9.2 [SIMULATED]</span>
<span class="go">module load ifort/2015.1.133-GCC-4.9.2 [SIMULATED]</span>
<span class="go">module load impi/5.0.2.044-iccifort-2015.1.133-GCC-4.9.2 [SIMULATED]</span>
<span class="go">module load imkl/11.2.1.133-iimpi-7.2.3-GCC-4.9.2 [SIMULATED]</span>
<span class="go">module load intel/2015a [SIMULATED]</span>

<span class="go">Loading modules for dependencies...</span>

<span class="go">module load JasPer/1.900.1-intel-2015a [SIMULATED]</span>
<span class="go">module load netCDF/4.3.2-intel-2015a [SIMULATED]</span>
<span class="go">module load netCDF-Fortran/4.4.0-intel-2015a [SIMULATED]</span>
<span class="go">module load tcsh/6.18.01-intel-2015a [SIMULATED]</span>

<span class="go">Full list of loaded modules:</span>
<span class="go">  (none)</span>


<span class="go">!!!</span>
<span class="go">!!! WARNING: Not all FFTW interface libraries [&#39;fftw3xc_intel&#39;, &#39;mkl_intel_lp64&#39;, &#39;mkl_sequential&#39;, &#39;mkl_core&#39;] are found in [&#39;$EBROOTIMKL/mkl/lib/intel64&#39;, &#39;$EBROOTIMKL/compiler/lib/intel64&#39;], can&#39;t set $FFT_LIB.</span>
<span class="go">!!!</span>

<span class="go">Defining build environment...</span>

<span class="go">  export BLACS_INC_DIR=&quot;&quot;</span>
<span class="go">  export BLACS_LIB_DIR=&quot;&quot;</span>
<span class="go">  export BLACS_MT_STATIC_LIBS=&quot;libmkl_blacs_intelmpi_lp64.a&quot;</span>
<span class="go">  export BLACS_STATIC_LIBS=&quot;libmkl_blacs_intelmpi_lp64.a&quot;</span>
<span class="go">  export BLAS_INC_DIR=&quot;&quot;</span>
<span class="go">  export BLAS_LAPACK_INC_DIR=&quot;&quot;</span>
<span class="go">  export BLAS_LAPACK_LIB_DIR=&quot;&quot;</span>
<span class="go">  export BLAS_LAPACK_MT_STATIC_LIBS=&quot;libmkl_intel_lp64.a,libmkl_intel_thread.a,libmkl_core.a,libiomp5.a,libpthread.a&quot;</span>
<span class="go">  export BLAS_LAPACK_STATIC_LIBS=&quot;libmkl_intel_lp64.a,libmkl_sequential.a,libmkl_core.a&quot;</span>
<span class="go">  export BLAS_LIB_DIR=&quot;&quot;</span>
<span class="go">  export BLAS_MT_STATIC_LIBS=&quot;libmkl_intel_lp64.a,libmkl_intel_thread.a,libmkl_core.a,libiomp5.a,libpthread.a&quot;</span>
<span class="go">  export BLAS_STATIC_LIBS=&quot;libmkl_intel_lp64.a,libmkl_sequential.a,libmkl_core.a&quot;</span>
<span class="go">  export CC=&quot;icc&quot;</span>
<span class="go">  export CFLAGS=&quot;-O2 -ftz -fp-speculation=safe -fp-model source&quot;</span>
<span class="go">  export CPPFLAGS=&quot;&quot;</span>
<span class="go">  export CXX=&quot;icpc&quot;</span>
<span class="go">  export CXXFLAGS=&quot;-O2 -ftz -fp-speculation=safe -fp-model source&quot;</span>
<span class="go">  export F77=&quot;ifort&quot;</span>
<span class="go">  export F90=&quot;ifort&quot;</span>
<span class="go">  export F90FLAGS=&quot;-O2 -ftz -fp-speculation=safe -fp-model source&quot;</span>
<span class="go">  export FFLAGS=&quot;-O2 -ftz -fp-speculation=safe -fp-model source&quot;</span>
<span class="go">  export FFTW_INC_DIR=&quot;&quot;</span>
<span class="go">  export FFTW_LIB_DIR=&quot;&quot;</span>
<span class="go">  export FFTW_STATIC_LIBS=&quot;&quot;</span>
<span class="go">  export FFT_INC_DIR=&quot;&quot;</span>
<span class="go">  export FFT_LIB_DIR=&quot;&quot;</span>
<span class="go">  export FFT_STATIC_LIBS=&quot;&quot;</span>
<span class="go">  export I_MPI_CC=&quot;icc&quot;</span>
<span class="go">  export I_MPI_CXX=&quot;icpc&quot;</span>
<span class="go">  export I_MPI_F77=&quot;ifort&quot;</span>
<span class="go">  export I_MPI_F90=&quot;ifort&quot;</span>
<span class="go">  export LAPACK_INC_DIR=&quot;&quot;</span>
<span class="go">  export LAPACK_LIB_DIR=&quot;&quot;</span>
<span class="go">  export LAPACK_MT_STATIC_LIBS=&quot;libmkl_intel_lp64.a,libmkl_intel_thread.a,libmkl_core.a,libiomp5.a,libpthread.a&quot;</span>
<span class="go">  export LAPACK_STATIC_LIBS=&quot;libmkl_intel_lp64.a,libmkl_sequential.a,libmkl_core.a&quot;</span>
<span class="go">  export LDFLAGS=&quot;&quot;</span>
<span class="go">  export LIBBLACS=&quot;-Wl,-Bstatic -Wl,--start-group -lmkl_blacs_intelmpi_lp64 -Wl,--end-group -Wl,-Bdynamic&quot;</span>
<span class="go">  export LIBBLACS_MT=&quot;-Wl,-Bstatic -Wl,--start-group -lmkl_blacs_intelmpi_lp64 -Wl,--end-group -Wl,-Bdynamic&quot;</span>
<span class="go">  export LIBBLAS=&quot;-Wl,-Bstatic -Wl,--start-group -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group -Wl,-Bdynamic&quot;</span>
<span class="go">  export LIBBLAS_MT=&quot;-Wl,-Bstatic -Wl,--start-group -lmkl_intel_lp64 -lmkl_intel_thread -lmkl_core -Wl,--end-group -Wl,-Bdynamic -liomp5 -lpthread&quot;</span>
<span class="go">  export LIBFFT=&quot;&quot;</span>
<span class="go">  export LIBLAPACK=&quot;-Wl,-Bstatic -Wl,--start-group -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group -Wl,-Bdynamic&quot;</span>
<span class="go">  export LIBLAPACK_MT=&quot;-Wl,-Bstatic -Wl,--start-group -lmkl_intel_lp64 -lmkl_intel_thread -lmkl_core -Wl,--end-group -Wl,-Bdynamic -liomp5 -lpthread&quot;</span>
<span class="go">  export LIBLAPACK_MT_ONLY=&quot;-Wl,-Bstatic -Wl,--start-group -lmkl_intel_lp64 -lmkl_intel_thread -lmkl_core -Wl,--end-group -Wl,-Bdynamic -liomp5 -lpthread&quot;</span>
<span class="go">  export LIBLAPACK_ONLY=&quot;-Wl,-Bstatic -Wl,--start-group -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group -Wl,-Bdynamic&quot;</span>
<span class="go">  export LIBS=&quot;-liomp5 -lpthread&quot;</span>
<span class="go">  export LIBSCALAPACK=&quot;-Wl,-Bstatic -Wl,--start-group -lmkl_scalapack_lp64 -lmkl_blacs_intelmpi_lp64 -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group -Wl,-Bdynamic&quot;</span>
<span class="go">  export LIBSCALAPACK_MT=&quot;-Wl,-Bstatic -Wl,--start-group -lmkl_scalapack_lp64 -lmkl_blacs_intelmpi_lp64 -lmkl_intel_lp64 -lmkl_intel_thread -lmkl_core -Wl,--end-group -Wl,-Bdynamic -liomp5 -lpthread&quot;</span>
<span class="go">  export LIBSCALAPACK_MT_ONLY=&quot;-Wl,-Bstatic -Wl,--start-group -lmkl_scalapack_lp64 -Wl,--end-group -Wl,-Bdynamic -liomp5 -lpthread&quot;</span>
<span class="go">  export LIBSCALAPACK_ONLY=&quot;-Wl,-Bstatic -Wl,--start-group -lmkl_scalapack_lp64 -Wl,--end-group -Wl,-Bdynamic&quot;</span>
<span class="go">  export MPICC=&quot;mpicc&quot;</span>
<span class="go">  export MPICH_CC=&quot;icc&quot;</span>
<span class="go">  export MPICH_CXX=&quot;icpc&quot;</span>
<span class="go">  export MPICH_F77=&quot;ifort&quot;</span>
<span class="go">  export MPICH_F90=&quot;ifort&quot;</span>
<span class="go">  export MPICXX=&quot;mpicxx&quot;</span>
<span class="go">  export MPIF77=&quot;mpif77&quot;</span>
<span class="go">  export MPIF90=&quot;mpif90&quot;</span>
<span class="go">  export MPI_INC_DIR=&quot;&quot;</span>
<span class="go">  export MPI_LIB_DIR=&quot;&quot;</span>
<span class="go">  export MPI_LIB_SHARED=&quot;&quot;</span>
<span class="go">  export MPI_LIB_STATIC=&quot;&quot;</span>
<span class="go">  export OPTFLAGS=&quot;-O2&quot;</span>
<span class="go">  export PRECFLAGS=&quot;-ftz -fp-speculation=safe -fp-model source&quot;</span>
<span class="go">  export SCALAPACK_INC_DIR=&quot;&quot;</span>
<span class="go">  export SCALAPACK_LIB_DIR=&quot;&quot;</span>
<span class="go">  export SCALAPACK_MT_STATIC_LIBS=&quot;libmkl_scalapack_lp64.a,libmkl_blacs_intelmpi_lp64.a,libmkl_intel_lp64.a,libmkl_intel_thread.a,libmkl_core.a,libiomp5.a,libpthread.a&quot;</span>
<span class="go">  export SCALAPACK_STATIC_LIBS=&quot;libmkl_scalapack_lp64.a,libmkl_blacs_intelmpi_lp64.a,libmkl_intel_lp64.a,libmkl_sequential.a,libmkl_core.a&quot;</span>

<span class="go">configuring... [DRY RUN]</span>

<span class="go">[configure_step method]</span>
<span class="go">  export NETCDF=&quot;$EBROOTNETCDF&quot;</span>
<span class="go">  export NETCDFF=&quot;$EBROOTNETCDFMINFORTRAN&quot;</span>
<span class="go">  export JASPERINC=&quot;$EBROOTJASPER/include&quot;</span>
<span class="go">  export JASPERLIB=&quot;$EBROOTJASPER/lib&quot;</span>
<span class="go">  export WRFIO_NCD_LARGE_FILE_SUPPORT=&quot;1&quot;</span>
<span class="go">Perl script patched: arch/Config_new.pl</span>
<span class="go">  running interactive command &quot;./configure&quot;</span>
<span class="go">  (in /home/example/eb/software/WRF/3.6.1-intel-2015a-dmpar/WRF-3.6.1)</span>
<span class="go">applying regex substitutions to file configure.wrf</span>
<span class="go">  * regex pattern &#39;^(DM_FC\s*=\s*).*$&#39;, replacement string &#39;\1 mpif90&#39;</span>
<span class="go">  * regex pattern &#39;^(DM_CC\s*=\s*).*$&#39;, replacement string &#39;\1 mpicc -DMPI2_SUPPORT&#39;</span>
<span class="go">  * regex pattern &#39;^(SFC\s*=\s*).*$&#39;, replacement string &#39;\1 ifort&#39;</span>
<span class="go">  * regex pattern &#39;^(SCC\s*=\s*).*$&#39;, replacement string &#39;\1 icc&#39;</span>
<span class="go">  * regex pattern &#39;^(CCOMP\s*=\s*).*$&#39;, replacement string &#39;\1 icc&#39;</span>
<span class="go">applying regex substitutions to file configure.wrf</span>
<span class="go">  * regex pattern &#39;^(FCOPTIM.*)(\s-O3)(\s.*)$&#39;, replacement string &#39;\1 -O2 -ftz -fp-speculation=safe -fp-model source \3&#39;</span>
<span class="go">  * regex pattern &#39;^(CFLAGS_LOCAL.*)(\s-O3)(\s.*)$&#39;, replacement string &#39;\1 -O2 -ftz -fp-speculation=safe -fp-model source \3&#39;</span>

<span class="go">building... [DRY RUN]</span>

<span class="go">[build_step method]</span>
<span class="go">  running command &quot;tcsh ./compile -j 4 wrf&quot;</span>
<span class="go">  (in /home/example/eb/software/WRF/3.6.1-intel-2015a-dmpar/WRF-3.6.1)</span>
<span class="go">  running command &quot;tcsh ./compile -j 4 em_real&quot;</span>
<span class="go">  (in /home/example/eb/software/WRF/3.6.1-intel-2015a-dmpar/WRF-3.6.1)</span>
<span class="go">  running command &quot;tcsh ./compile -j 4 em_b_wave&quot;</span>
<span class="go">  (in /home/example/eb/software/WRF/3.6.1-intel-2015a-dmpar/WRF-3.6.1)</span>

<span class="go">testing... [DRY RUN]</span>

<span class="go">[test_step method]</span>
<span class="go">  export I_MPI_MPD_TMPDIR=&quot;/tmp/eb-Dh1wOp&quot;</span>
<span class="go">  export PBS_ENVIRONMENT=&quot;PBS_BATCH_MPI&quot;</span>
<span class="go">  export I_MPI_PROCESS_MANAGER=&quot;mpd&quot;</span>
<span class="go">file written: /tmp/eb-Dh1wOp/mpi_cmd_for-nzyh5V/mpdboot</span>
<span class="go">file written: /tmp/eb-Dh1wOp/mpi_cmd_for-nzyh5V/nodes</span>
<span class="go">  export I_MPI_MPD_TMPDIR=&quot;/tmp/eb-Dh1wOp&quot;</span>
<span class="go">  export PBS_ENVIRONMENT=&quot;PBS_BATCH_MPI&quot;</span>
<span class="go">  export I_MPI_PROCESS_MANAGER=&quot;mpd&quot;</span>
<span class="go">file written: /tmp/eb-Dh1wOp/mpi_cmd_for-hIOEd_/mpdboot</span>
<span class="go">file written: /tmp/eb-Dh1wOp/mpi_cmd_for-hIOEd_/nodes</span>

<span class="go">installing... [DRY RUN]</span>

<span class="go">[stage_install_step method]</span>

<span class="go">[make_installdir method]</span>

<span class="go">[install_step method]</span>

<span class="go">taking care of extensions... [DRY RUN]</span>

<span class="go">[extensions_step method]</span>

<span class="go">postprocessing... [DRY RUN]</span>

<span class="go">[post_install_step method]</span>

<span class="go">sanity checking... [DRY RUN]</span>

<span class="go">[sanity_check_step method]</span>
<span class="go">Sanity check paths - file [&#39;files&#39;]</span>
<span class="go">  * WRFV3/main/ideal.exe</span>
<span class="go">  * WRFV3/main/libwrflib.a</span>
<span class="go">  * WRFV3/main/ndown.exe</span>
<span class="go">  * WRFV3/main/nup.exe</span>
<span class="go">  * WRFV3/main/real.exe</span>
<span class="go">  * WRFV3/main/tc.exe</span>
<span class="go">  * WRFV3/main/wrf.exe</span>
<span class="go">Sanity check paths - (non-empty) directory [&#39;dirs&#39;]</span>
<span class="go">  * WRFV3/main</span>
<span class="go">  * WRFV3/run</span>
<span class="go">Sanity check commands</span>
<span class="go">  (none)</span>

<span class="go">cleaning up... [DRY RUN]</span>

<span class="go">[cleanup_step method]</span>

<span class="go">creating module... [DRY RUN]</span>

<span class="go">[make_module_step method]</span>
<span class="go">Generating module file /home/example/eb/modules/all/WRF/3.6.1-intel-2015a-dmpar, with contents:</span>

<span class="gp">    #</span>%Module
<span class="go">    proc ModulesHelp { } {</span>
<span class="go">        puts stderr { The Weather Research and Forecasting (WRF) Model is a next-generation mesoscale</span>
<span class="go">     numerical weather prediction system designed to serve both operational forecasting and atmospheric</span>
<span class="go">     research needs. - Homepage: http://www.wrf-model.org</span>
<span class="go">        }</span>
<span class="go">    }</span>

<span class="go">    module-whatis {Description: The Weather Research and Forecasting (WRF) Model is a next-generation mesoscale</span>
<span class="go">     numerical weather prediction system designed to serve both operational forecasting and atmospheric</span>
<span class="go">     research needs. - Homepage: http://www.wrf-model.org}</span>

<span class="go">    set root /home/example/eb/software/WRF/3.6.1-intel-2015a-dmpar</span>

<span class="go">    conflict WRF</span>

<span class="go">    if { ![ is-loaded intel/2015a ] } {</span>
<span class="go">        module load intel/2015a</span>
<span class="go">    }</span>

<span class="go">    if { ![ is-loaded JasPer/1.900.1-intel-2015a ] } {</span>
<span class="go">        module load JasPer/1.900.1-intel-2015a</span>
<span class="go">    }</span>

<span class="go">    if { ![ is-loaded netCDF/4.3.2-intel-2015a ] } {</span>
<span class="go">        module load netCDF/4.3.2-intel-2015a</span>
<span class="go">    }</span>

<span class="go">    if { ![ is-loaded netCDF-Fortran/4.4.0-intel-2015a ] } {</span>
<span class="go">        module load netCDF-Fortran/4.4.0-intel-2015a</span>
<span class="go">    }</span>

<span class="go">    setenv  EBROOTWRF       &quot;$root&quot;</span>
<span class="go">    setenv  EBVERSIONWRF        &quot;3.6.1&quot;</span>
<span class="go">    setenv  EBDEVELWRF      &quot;$root/easybuild/WRF-3.6.1-intel-2015a-dmpar-easybuild-devel&quot;</span>

<span class="go">    setenv  NETCDF      &quot;$EBROOTNETCDF&quot;</span>
<span class="go">    setenv  NETCDFF     &quot;$EBROOTNETCDFMINFORTRAN&quot;</span>
<span class="gp">    # </span>Built with EasyBuild version <span class="m">2</span>.4.0


<span class="go">permissions... [DRY RUN]</span>

<span class="go">[permissions_step method]</span>

<span class="go">packaging... [DRY RUN]</span>

<span class="go">[package_step method]</span>

<span class="go">== COMPLETED: Installation ended successfully</span>

<span class="go">Important note: the actual build &amp; install procedure that will be performed may diverge</span>
<span class="gp gp-VirtualEnv">(slightly)</span> <span class="go">from what is outlined above, due to conditions in the easyblock which are</span>
<span class="go">incorrectly handled in a dry run.</span>
<span class="go">Any errors that may occur are ignored and reported as warnings, on a per-step basis.</span>
<span class="go">Please be aware of this, and only use the information above for quick debugging purposes.</span>

<span class="gp gp-VirtualEnv">(no ignored errors during dry run)</span>

<span class="go">== Build succeeded for 1 out of 1</span>
<span class="go">== Temporary log file(s) /tmp/eb-Dh1wOp/easybuild-0bu9u9.log* have been removed.</span>
<span class="go">== Temporary directory /tmp/eb-Dh1wOp has been removed.</span>
</code></pre></div>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 18, 2022</span>
      
    
  </small>
</div>


  




                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://twitter.com/easy_build" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://www.youtube.com/c/easybuilders" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://docs.easybuild.io" target="_blank" rel="noopener" title="docs.easybuild.io" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["instant", "navigation.top", "toc.integrate"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>